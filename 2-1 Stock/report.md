---
header-includes:
    - \usepackage{ctex}
---

# 2-1 Stock 解题报告

## 原理

根据题意，需要维护一种 FIFO 的数据结构，且能快速返回当前的最大值。这就是课上讲到的 `Queap` ，即维护两个队列，一个记录数据，一个记录当前元素及之后所有元素中的最大值。

## 遇到的问题

结果可能超出 `int` 范围，须用长整形存储。

## 复杂度分析

- 时间复杂度：
    + 入队：最坏情况 $\mathcal{O}(n)$ （插入元素时，需要逐个更新它之前的元素在最大队列中对应的值，直到遇到比当前插入元素更大的元素为止；当按升序插入元素时，取到最坏情况，需要遍历之前的整个队列）
    + 出队：$\mathcal{O}(1)$ （只需将两个队尾的元素同时出队）
    + 取最大值：$\mathcal{O}(1)$ （只需返回最大队列队尾的值）
    
    维护 $N$ 支股票，最坏情况为 $\mathcal{O}(N^2)$。
- 空间复杂度：维护两个队列，$\mathcal{O}(N)$。