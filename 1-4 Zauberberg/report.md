---
header-includes:
    - \usepackage{ctex}
---

# 1-4 Zauberberg 解题报告

## 原理

对输入的 +/- 分布分别记录, 然后按高度从高到低的顺序进行累加, 在 h 位置的累加结果即 "高度不小于 h 的 +/- 的数量". 用输入的比率乘以 +/- 的总数, 得到最大误杀数和最小命中数, 在之前累加得到的数组中进行查找即得到高度的上下界.

## 遇到的问题
如果直接开两个长度为 `H` 的数组存储输入和累加结果, 会超出内存限制. 考虑到输入到稀疏性 ($H >> N$), 可减小数组尺寸, 数组的每个元素是一个链表, 代表某一特定范围内所有出现的 `h` 的信息.

## 复杂度分析

- 时间复杂度: 设每个链表的最大长度规定为常数 $L$ (实现时取了 `1 << 7`). 每增加一个生物的时间复杂度 (通过循秩访问找到所属链表, 再通过线性遍历确定在链表中的位置) 为 $\mathcal{O}(1)+O(L)=\mathcal{O}(1)$. 由于实际存在的链表节点最多 $N$ 个, 累加操作的时间复杂度为 $\mathcal{O}(H/L)+\mathcal{O}(N)=\mathcal{O}(H+N)$. 每次确定上下界实质是在长度为 $N$ 的有序数组中进行二分查找, 复杂度为 $\mathcal{O}(\log{N})$. 总体时间复杂度为 $\mathcal{O}(N)+\mathcal{O}(N+H)+\mathcal{O}(M\log{N})=\mathcal{O}(N+H+M\log{N})$.

- 空间复杂度: $\mathcal{O}(H/L)+\mathcal{O}(N)=\mathcal{O}(N+H)$.